=== 1.1.2 Модуль TextPro ===
 Модуль *TextParser* является текстовым процессором, служит для добавления разнообразных эффектов форматирования при выводе текста на графике. Работа модуля *TextParser* находится в тесном взаимодействии с модулем *GTextParser*.
*Класс TextDraw(Parser, size = None, bg = None, bg_offset = (0, 0), text_offset = (0, 0), text_color = 0x0, shadow_offset = (0, 0), shadow_color = 0xffff, scroll = (0, 4), Draw_callback = lambda: None, rotate = 0, align = 4)*
 Создаёт объект TextDraw.
*Parser*
 Объект _*GTextParser.Parser*_ где,
*cloth* - холст, на котором будет производится рисование;
*text* - текст, который будет выводится;
Для получения дополнительной информации по работе с парсером, смотрите документацию модуля *GTextParser*.
Требуется при создании объекта *GTextParser.Parser* оставить значение аргумента *calc_auto* по-умолчанию (т.е. _*0*_) и вызвать метод *Parser.Calcsets()* после создания объекта *TextDraw*.


*size*
 Это необязательный параметр. Кортеж из двух абсолютных численных значений, означающих размеры площади (в пикселах), на которой будет выводится текст. Передача *size* значения _*None*_ равносильна передаче ему зармеров фона *bg*. По-умолчанию значение *size* задано как *None*.
*bg*
 Это необязательный параметр. Объект _*graphics.Image*_, либо какой-нибудь аналогичный объкт. Изображение, полученное от данного объекта, используется в качестве фона такста. Передача *bg* значения _*None*_ равносильна передаче ему копии объекта *Parser.cloth*. По-умолчанию значение *bg* задано как _*None*_.
*bg_offset*
 Это необязательный параметр. Кортеж, содержащий два целых числа, означающих в пикселах смещение по осям _*x*_ и _*y*_ фона *bg* относительно холста *Parser.cloth*. По-умолчанию значение *bg_offset* задано как _*(0, 0)*_.
*text_offset*
 Это необязательный параметр. Кортеж, содержащий два целых числа, означающих в пикселах смещение по осям _*x*_ и _*y*_ текста из *Parser.string_list* относительно фона *bg*. По-умолчанию значение *text_offset* задано как _*(0, 0)*_.
*text_color*
 Это необязательный параметр. Цвет текста. Поддерживаются все модели задания цвета, поддерживаемые объектом *Parser.cloth*. По-умолчанию значение *text_color* задано как _*0x0*_.
*shadow_offset*
 Это необязательный параметр. Кортеж, содержащий два целых числа, означающих смещение в пикселах по осям _*x*_ и _*y*_ тени текста  относительно текста. Если значение *shadow_offset* задано как _*(0, 0)*_, то тень отсутствует. По-умолчанию значение *shadow_offset* задано как _*(0, 0)*_.
*shadow_color*
 Это необязательный параметр. Цвет тени текста. Поддерживаются все модели задания цвета, поддерживаемые объектом *Parser.cloth*. По-умолчанию значение *shadow_color* задано как _*0xffff*_.
*scroll*
 Это необязательный параметр. Кортеж, состоящий из двух абсолютных целых чисел, кторые задают параметры плавного скролла. Если первое число задано как _*1*_, то плавный скролл включён, если _*0*_ - выключен. Второе число  задает шаг сдвига текста в пикселах. По-умолчанию значение *scroll* задано как _*(0, 4)*_.
*Draw_callback*
 Это необязательный параметр. Вызываемый объект, функция, которая вызывается методом *Draw()* после каждой отрисовки текста. По-умолчанию передаётся пустая функция, которая ничего не делает.
*rotate*
 Флаг , описывающий разворот текста. По-умолчанию значение *rotate* задано как _*PORTRAIT*_. Модуль *flags* содержит описание флагов.
*align*
 Флаг, описывающий способ выравнивания текста относительно фона. По-умолчанию значение *align* задано как _*ALIGN_LEFT*_. Модуль *flags* содержит описание флагов.
=== Тип TextDraw ===
*Экземпляр типа TextDraw содержит следущие атрибуты:*

*Parser*
 Объект _*GTextParser.Parser*_ где,
*cloth* - холст, на котором производится рисование;
*text* - переданный текст.
*size*
 Кортеж из двух абсолютных численных значений, означающих размеры площади (в пикселах), на которой будет выводится текст. Передача *size* значения _*None*_ равносильна передаче ему зармеров фона. Читается и записывается. После смены значения *size* необходимо вызвать метод *Parser.Calssets()*.
Например,
{{{
from ArchetypeUI.GUI import *
from ArchetypeUI.GUI.flags import *
from graphics import *
t = open("c:\\gpl.txt","rb")
txt = unicode(t.read())
t.close()
img = Image.new((240, 320))
gt = GTextParser.Parser(cloth = img, text = txt)
tp = TextPro.TextDraw(Parser = gt, Draw_callback = lambda: canv.blit(img))
gt.Calcsets()
tp.Draw()
tp.size = (120, 320)
gt.Calcsets()
tp.Draw()
}}}

*bg*
 Объект _*graphics.Image*_, либо аналогичный объкт. Изображение, полученное от данного объекта, используется в качестве фона такста. Передача *bg* значения _*None*_ равносильна передаче ему копии объекта *Parser.cloth*. Читается и записывается.
*bg_offset*
 Кортеж, содержащий два целых числа, означающих в пикселах смещение по осям _*x*_ и _*y*_ фона *bg* относительно холста *Parser.cloth*. Читается и записывается.
*text_offset*
 Кортеж, содержащий два целых числа, означающих в пикселах смещение по осям _*x*_ и _*y*_ текста из *Parser.string_list* относительно фона *bg*. Читается и записывается.
*text_color*
 Цвет текста. Поддерживаются все модели задания цвета, поддерживаемые объектом *Parser.cloth*. Читается и записывается.
*shadow_offset*
 Кортеж, содержащий два целых числа, означающих в пикселах смещение по осям _*x*_ и _*y*_ тени текста  относительно текста. Если значение *shadow_offset* задано как _*(0, 0)*_, то тень отсутствует. Читается и записывается.
*shadow_color*
 Цвет тени текста. Поддерживаются все модели задания цвета, поддерживаемые объектом *Parser.cloth*. Читается и записывается.
*scroll*
 Кортеж, состоящий из двух абсолютных целых чисел, кторые описывают параметры плавного скролла. Если первое число задано как _*1*_, то плавный скролл включён, если _*0*_ - выключен. Второе число  задает шаг сдвига текста в пикселах. Читается и записывается.
*Draw_callback*
 Вызываемый объект, функция, которая вызывается методом *Draw()* после каждой отрисовки текста.
*rotate*
 Флаг, описывающий разворот текста. Модуль *flags* содержит описание флагов. После смены значения *rotate* необходимо вызвать метод *Parser.Calssets()*.
Например,
{{{
from ArchetypeUI.GUI import *
from ArchetypeUI.GUI.flags import *
from graphics import *
img = Image.new((240, 320))
gt = GTextParser.Parser(cloth = img, text = u"Hello world!")
tp = TextPro.TextDraw(Parser = gt, Draw_callback = lambda: canv.blit(img))
gt.Calcsets()
tp.Draw()
tp.rotate = ROTATE_TO_LEFT
gt.Calcsets()
tp.Draw()
}}}

*align*
 Флаг, описывающий способ выравнивания текста относительно фона. Модуль *flags* содержит описание флагов.
*Экземпляр типа TextDraw содержит следущие методы:*

*Draw(direction = 0, repeat = 1)*
 Рисует текст на холсте *Parser.cloth* в соответствии с заданными параметрами. Если *direction* имеет значение _*1*_ то происходит рисование с  переходом на строку вперед, если _*-1*_ - на строку назад. Вызов метода с значением *direction* по-умолчанию _*0*_ производит перерисовку текста в соответствии с текущим содержанием *Parser.string_list*.
Вызов повторяется такое колличество раз, какое указано в аргументе *repeat*.